'use strict';
Object.defineProperty(exports, "__esModule", { value: true });
const http_1 = require("http");
const https_1 = require("https");
const agentMap = {};
class RequestAgent {
    constructor(protocol, host, replaceAgent) {
        const isHttps = protocol === 'https:';
        if (agentMap[protocol] === undefined) {
            agentMap[protocol] = {};
        }
        const protocolMap = agentMap[protocol];
        if (protocolMap[host] === undefined || replaceAgent || false) {
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
            protocolMap[host] = isHttps
                ? new https_1.Agent({ keepAlive: true })
                : new http_1.Agent({ keepAlive: true });
        }
        this.agent = protocolMap[host];
    }
}
exports.default = RequestAgent;
